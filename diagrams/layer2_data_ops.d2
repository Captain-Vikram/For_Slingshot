colorMode pastel
styleMode shadow
typeface clean
title Layer 2 Vision and Data Ops
direction down

DataOps[label: "Data Ops Pipeline", color: "purple"]
{
  RawIngest[label: "Raw Ingest"]
  DataVersionControl[label: "Data Versioning\n(S3 / local)", color: "blue"]
  LabelingLoop[label: "Labeling Loop"]
  {
    AutoLabeler[label: "AutoLabeler\n(VLM-powered; direct video ingest)"]
    HumanVerify[label: "Human Verification"]
  }
  TrainingCluster[label: "Training Cluster", color: "green"]
  {
    Augmentation[label: "Augmentation"]
    YOLOTrainer[label: "YOLOv12 Trainer"]
    ModelRegistry[label: "Model Registry\n(File system: ./models)"]
  }
}

RawIngest>DataVersionControl: DirectIngest
DataVersionControl>AutoLabeler: BuildLabels
AutoLabeler>HumanVerify: Verify
HumanVerify>Augmentation: ReadyDataset
Augmentation>YOLOTrainer: TrainInput
YOLOTrainer>ModelRegistry: PushBestPt

Input[label: "From Infrastructure", shape: oval, color: "gray"]
Output[label: "To RAG Engine", shape: oval, color: "green"]
Input>RawIngest: Trigger
ModelRegistry>Output: ModelMetadata

legend
{
  [connection: >, label: request flow]
  [shape: rectangle, color: blue, label: versioned dataset]
  [shape: rectangle, color: purple, label: model registry]
}
